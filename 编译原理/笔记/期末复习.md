# 复习

选择题20分 基本概念要背

## 编译器的6个阶段

![image-20231226130252436](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226130252436.png)

## 词法分析

技术路线：

- 用正则表达式描述单词
- 模拟有限状态自动机执行来识别单词
- 正则表达式与自动机间的桥梁-转化算法
  - 正则表达式->NFA，Thompson构造法
  - NFA->DFA，子集构造法
  - DFA最小化



### 基本概念

- 符号串集合:
  - 单词：类别，符号串分组    重点在于类别
    - <number>,<identifier>
  - 模式：单词<->词素，字符串集如何分类为单词
    - 正则表达式，[A-Z]*
  - 词素：实例    与模式匹配，分类为单词
    - 1,2,3；name,i
- 正则式——模式
  - 用简单语言（符号串集合）的运算描述复杂语言
  - 正则式：语言运算的描述方法

- 正则表达式基本概念：

  - 字母表、符号串、语言

  - 符号串（集合）的运算

  - 正则表达式递归定义：`|`,`连接`，`*`，`()`

    - 优先级由低到高：`|`，`连接`，`*`,`()`。  

    - 并集运算、连接运算、闭包运算、括号

    - 闭包运算：连接、并集。幂是多个连接运算
      $$
      L^*=L^0+L^1+L^2+.....+L^\infty \\
      L^+=L^1+L^2+....+L^\infty
      $$
      

  - 正则式运算法则，等价

  - 正则定义

  - 符号简写：+、?、[]

**考题**：用一个自然语言描述符号串集合，用有限自动机/正则表达式设计；也有选择题考概念

![image-20231226132216390](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226132216390.png)

![image-20231226132342901](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226132342901.png)



![image-20231226132515841](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226132515841.png)
$$
0(0|1)^*1\\
1(0|1)^*0
$$


- 有限自动机基本概念：
  - 非确定有限自动机，NFA
  - 确定有限自动机，DFA

![image-20231226132752758](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226132752758.png)

**DFA的状态数会是NFA的指数。DFA时间复杂性占优、而空间复杂性不占优。**

![image-20231226132835063](D:/%E5%A4%A7%E4%B8%89%E4%B8%8A/OS/%E5%AE%9E%E9%AA%8C%E4%BD%9C%E4%B8%9A/lab8/image-20231226132835063.png)

![image-20231226133007437](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226133007437.png)

按除以3的余数划分子集状态 



- 正则式->NFA

  ![image-20231226133239800](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226133239800.png)

  - 正则式——静态描述->自动机——动态识别；DFA时间复杂性更优，NFA转换更方便——中间桥梁
  - Thompson构造法

![image-20231226133410224](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226133410224.png)

- NFA->DFA：子集构造法

![image-20231226134000275](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226134000275.png)

考题    子集构造法要比较熟悉

![image-20231226134029566](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226134029566.png)

- 最小化DFA

![image-20231226134227682](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226134227682.png)

![image-20231226134444015](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226134444015.png)

## 语法分析

<img src="C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226134651717.png" alt="image-20231226134651717" style="zoom: 80%;" />

![image-20231226134824135](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226134824135.png)
$$
a^ib^ja^kb^I\\
S\rightarrow
$$


![image-20231226135239909](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226135239909.png)

## 自顶向下语法分析

预测分析法



![image-20231226135456090](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226135456090.png)



![image-20231226135635428](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226135635428.png)



FOLLOW：看产生式右部。比如找T

- 有S->...AT的，那么把FOLLOW(S)全部加入FOLLOW(T)中

- 有S->...ATU的，把FIRST(U)加入FOLLOW(T)中，其中空字$\epsilon$不要加进FOLLOW集合


## 自底向上分析算法

![image-20231226141451233](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226141451233.png)

- SLR
- LR(1)
- LALR

## 语法制导

## 类型检查

- 类型表达式
  - 基本类型表达式
  - 类型构造符号
- 类型表达式等价
  - 结构等价
    - pascal默认采取名字等价
  - 名字等价
    - c语言只对struct默认采取名字等价

## 中间代码生成

三地址码

- 表达式翻译
  - 临时名字重用

![image-20231226142510515](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226142510515.png)

t1:a+a

t2:t1+a

t2:a*t2

t2:t1+t2

t2:a+t2   只用2个



![image-20231226142706405](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226142706405.png)

![image-20231226142743982](C:/Users/%E5%8D%8E%E7%9B%96%E5%B0%86%E5%80%BE/AppData/Roaming/Typora/typora-user-images/image-20231226142743982.png)

1月11日